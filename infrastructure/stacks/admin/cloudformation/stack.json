{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Parameters": {
    "Environment": {
      "Type": "String"
    }
  },
  "Resources": {
    "EmailQueue" : {
      "Type" : "AWS::SQS::Queue",
      "Properties" : {
        "ReceiveMessageWaitTimeSeconds" : "20",
        "FifoQueue" : "true",
        "ContentBasedDeduplication" : "true"
      }
    }
  },
  "Outputs": {
    "EmailQueueURL": {
      "Description": "URL of the email queue",
      "Value": {"Ref": "EmailQueue"}
    },
    "EmailQueue"  : {
      "Export": {
        "Name": {
          "Fn::Join": [
            "",
            [
              "email-queue-",
              {
                "Ref": "Environment"
              }
            ]
          ]
        }
      },
      "Value" : {"Ref" : "EmailQueue"}
    }
  }
}